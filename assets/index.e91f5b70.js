import{S as s,i as e,s as t,e as r,t as a,n as o,b as n,c as l,G as p,d as u,g as i,H as d,p as c,h as b,E as w,l as g,v as m,I as y}from"./vendor.878c767b.js";function f(s){let e,t,y,f,x,$,h,R,k,L,v,U,A;return{c(){e=r("div"),t=r("div"),y=r("span"),f=a(s[2]),x=o(),$=r("input"),h=o(),R=r("button"),R.textContent="GO",k=o(),L=r("iframe"),n(y,"class","netless-app-browser-status"),l(y,"loading","Loading"===s[2]),l(y,"ready","Ready"===s[2]),n($,"class","netless-app-browser-url"),n($,"autocomplete","off"),n($,"spellcheck","false"),n(R,"class","netless-app-browser-go"),n(t,"class","netless-app-browser-omnibox"),n(L,"title","Netless App Browser"),n(L,"class","netless-app-browser-content"),n(L,"frameborder","0"),p(L.src,v=s[0])||n(L,"src",v),n(e,"class","netless-app-browser"),n(e,"data-kind","browser")},m(r,a){u(r,e,a),i(e,t),i(t,y),i(y,f),i(t,x),i(t,$),d($,s[1]),i(t,h),i(t,R),i(e,k),i(e,L),U||(A=[c($,"input",s[5]),c($,"keypress",s[6]),c(R,"click",s[4]),c(L,"load",s[3])],U=!0)},p(s,[e]){4&e&&b(f,s[2]),4&e&&l(y,"loading","Loading"===s[2]),4&e&&l(y,"ready","Ready"===s[2]),2&e&&$.value!==s[1]&&d($,s[1]),1&e&&!p(L.src,v=s[0])&&n(L,"src",v)},i:w,o:w,d(s){s&&g(e),U=!1,m(A)}}}function x(s,e,t){const r=y();let{url:a="about:blank"}=e,{dummyURL:o=a}=e,n="Ready";function l(){t(0,a=o),t(2,n="Loading")}return s.$$set=s=>{"url"in s&&t(0,a=s.url),"dummyURL"in s&&t(1,o=s.dummyURL)},s.$$.update=()=>{1&s.$$.dirty&&r("update",a)},[a,o,n,function(){t(2,n="Ready")},l,function(){o=this.value,t(1,o)},s=>"Enter"===s.key&&l()]}class $ extends s{constructor(s){super(),e(this,s,x,f,t,{url:0,dummyURL:1})}}const h={kind:"Browser",setup(s){let e=s.getAttributes();if((null==e?void 0:e.url)||(s.setAttributes({url:"about:blank"}),e=s.getAttributes()),!e)throw new Error("[Browser]: Missing attributes");const t=s.getBox();t.mountStyles(".netless-app-browser{width:100%;height:100%;display:flex;flex-flow:column nowrap}.netless-app-browser-omnibox{padding:2px 4px;display:flex;align-items:center;gap:4px}.netless-app-browser-status{width:5em;font-size:x-small;text-align:center}.netless-app-browser-status.loading{color:gray}.netless-app-browser-status.ready{color:green}.netless-app-browser-url{flex-grow:1}.netless-app-browser-go{padding:1px 12px}.netless-app-browser-content{flex-grow:1}\n");const r=new $({target:t.$content,props:{url:e.url}});r.$on("update",(({detail:e})=>{s.updateAttributes(["url"],e)})),s.mobxUtils.autorun((()=>{r.$set({url:e.url,dummyURL:e.url})})),s.emitter.on("destroy",(()=>{console.log("[Browser]: destroy"),r.$destroy()}))}};export{h as default};
