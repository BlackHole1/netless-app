var Tt=Object.defineProperty;var G=Object.getOwnPropertySymbols;var Ht=Object.prototype.hasOwnProperty,Mt=Object.prototype.propertyIsEnumerable;var X=(t,e,o)=>e in t?Tt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,Z=(t,e)=>{for(var o in e||(e={}))Ht.call(e,o)&&X(t,o,e[o]);if(G)for(var o of G(e))Mt.call(e,o)&&X(t,o,e[o]);return t};var D,s,J,E,K,Y,T={},Q=[],Nt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function S(t,e){for(var o in e)t[o]=e[o];return t}function tt(t){var e=t.parentNode;e&&e.removeChild(t)}function h(t,e,o){var n,r,i,l={};for(i in e)i=="key"?n=e[i]:i=="ref"?r=e[i]:l[i]=e[i];if(arguments.length>2&&(l.children=arguments.length>3?D.call(arguments,2):o),typeof t=="function"&&t.defaultProps!=null)for(i in t.defaultProps)l[i]===void 0&&(l[i]=t.defaultProps[i]);return H(t,l,n,r,null)}function H(t,e,o,n,r){var i={type:t,props:e,key:o,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:r==null?++J:r};return s.vnode!=null&&s.vnode(i),i}function C(t){return t.children}function k(t,e){this.props=t,this.context=e}function A(t,e){if(e==null)return t.__?A(t.__,t.__.__k.indexOf(t)+1):null;for(var o;e<t.__k.length;e++)if((o=t.__k[e])!=null&&o.__e!=null)return o.__e;return typeof t.type=="function"?A(t):null}function et(t){var e,o;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((o=t.__k[e])!=null&&o.__e!=null){t.__e=t.__c.base=o.__e;break}return et(t)}}function ot(t){(!t.__d&&(t.__d=!0)&&E.push(t)&&!M.__r++||Y!==s.debounceRendering)&&((Y=s.debounceRendering)||K)(M)}function M(){for(var t;M.__r=E.length;)t=E.sort(function(e,o){return e.__v.__b-o.__v.__b}),E=[],t.some(function(e){var o,n,r,i,l,f;e.__d&&(l=(i=(o=e).__v).__e,(f=o.__P)&&(n=[],(r=S({},i)).__v=i.__v+1,I(f,i,r,o.__n,f.ownerSVGElement!==void 0,i.__h!=null?[l]:null,n,l==null?A(i):l,i.__h),at(n,i),i.__e!=l&&et(i)))})}function nt(t,e,o,n,r,i,l,f,d,p){var _,m,c,a,u,x,v,b=n&&n.__k||Q,w=b.length;for(o.__k=[],_=0;_<e.length;_++)if((a=o.__k[_]=(a=e[_])==null||typeof a=="boolean"?null:typeof a=="string"||typeof a=="number"||typeof a=="bigint"?H(null,a,null,null,a):Array.isArray(a)?H(C,{children:a},null,null,null):a.__b>0?H(a.type,a.props,a.key,null,a.__v):a)!=null){if(a.__=o,a.__b=o.__b+1,(c=b[_])===null||c&&a.key==c.key&&a.type===c.type)b[_]=void 0;else for(m=0;m<w;m++){if((c=b[m])&&a.key==c.key&&a.type===c.type){b[m]=void 0;break}c=null}I(t,a,c=c||T,r,i,l,f,d,p),u=a.__e,(m=a.ref)&&c.ref!=m&&(v||(v=[]),c.ref&&v.push(c.ref,null,a),v.push(m,a.__c||u,a)),u!=null?(x==null&&(x=u),typeof a.type=="function"&&a.__k!=null&&a.__k===c.__k?a.__d=d=it(a,d,t):d=rt(t,a,c,b,u,d),p||o.type!=="option"?typeof o.type=="function"&&(o.__d=d):t.value=""):d&&c.__e==d&&d.parentNode!=t&&(d=A(c))}for(o.__e=x,_=w;_--;)b[_]!=null&&(typeof o.type=="function"&&b[_].__e!=null&&b[_].__e==o.__d&&(o.__d=A(n,_+1)),ft(b[_],b[_]));if(v)for(_=0;_<v.length;_++)ct(v[_],v[++_],v[++_])}function it(t,e,o){var n,r;for(n=0;n<t.__k.length;n++)(r=t.__k[n])&&(r.__=t,e=typeof r.type=="function"?it(r,e,o):rt(o,r,r,t.__k,r.__e,e));return e}function N(t,e){return e=e||[],t==null||typeof t=="boolean"||(Array.isArray(t)?t.some(function(o){N(o,e)}):e.push(t)),e}function rt(t,e,o,n,r,i){var l,f,d;if(e.__d!==void 0)l=e.__d,e.__d=void 0;else if(o==null||r!=i||r.parentNode==null)t:if(i==null||i.parentNode!==t)t.appendChild(r),l=null;else{for(f=i,d=0;(f=f.nextSibling)&&d<n.length;d+=2)if(f==r)break t;t.insertBefore(r,i),l=i}return l!==void 0?l:r.nextSibling}function Rt(t,e,o,n,r){var i;for(i in o)i==="children"||i==="key"||i in e||R(t,i,null,o[i],n);for(i in e)r&&typeof e[i]!="function"||i==="children"||i==="key"||i==="value"||i==="checked"||o[i]===e[i]||R(t,i,e[i],o[i],n)}function _t(t,e,o){e[0]==="-"?t.setProperty(e,o):t[e]=o==null?"":typeof o!="number"||Nt.test(e)?o:o+"px"}function R(t,e,o,n,r){var i;t:if(e==="style")if(typeof o=="string")t.style.cssText=o;else{if(typeof n=="string"&&(t.style.cssText=n=""),n)for(e in n)o&&e in o||_t(t.style,e,"");if(o)for(e in o)n&&o[e]===n[e]||_t(t.style,e,o[e])}else if(e[0]==="o"&&e[1]==="n")i=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+i]=o,o?n||t.addEventListener(e,i?st:lt,i):t.removeEventListener(e,i?st:lt,i);else if(e!=="dangerouslySetInnerHTML"){if(r)e=e.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in t)try{t[e]=o==null?"":o;break t}catch(l){}typeof o=="function"||(o!=null&&(o!==!1||e[0]==="a"&&e[1]==="r")?t.setAttribute(e,o):t.removeAttribute(e))}}function lt(t){this.l[t.type+!1](s.event?s.event(t):t)}function st(t){this.l[t.type+!0](s.event?s.event(t):t)}function I(t,e,o,n,r,i,l,f,d){var p,_,m,c,a,u,x,v,b,w,$,y=e.type;if(e.constructor!==void 0)return null;o.__h!=null&&(d=o.__h,f=e.__e=o.__e,e.__h=null,i=[f]),(p=s.__b)&&p(e);try{t:if(typeof y=="function"){if(v=e.props,b=(p=y.contextType)&&n[p.__c],w=p?b?b.props.value:p.__:n,o.__c?x=(_=e.__c=o.__c).__=_.__E:("prototype"in y&&y.prototype.render?e.__c=_=new y(v,w):(e.__c=_=new k(v,w),_.constructor=y,_.render=Lt),b&&b.sub(_),_.props=v,_.state||(_.state={}),_.context=w,_.__n=n,m=_.__d=!0,_.__h=[]),_.__s==null&&(_.__s=_.state),y.getDerivedStateFromProps!=null&&(_.__s==_.state&&(_.__s=S({},_.__s)),S(_.__s,y.getDerivedStateFromProps(v,_.__s))),c=_.props,a=_.state,m)y.getDerivedStateFromProps==null&&_.componentWillMount!=null&&_.componentWillMount(),_.componentDidMount!=null&&_.__h.push(_.componentDidMount);else{if(y.getDerivedStateFromProps==null&&v!==c&&_.componentWillReceiveProps!=null&&_.componentWillReceiveProps(v,w),!_.__e&&_.shouldComponentUpdate!=null&&_.shouldComponentUpdate(v,_.__s,w)===!1||e.__v===o.__v){_.props=v,_.state=_.__s,e.__v!==o.__v&&(_.__d=!1),_.__v=e,e.__e=o.__e,e.__k=o.__k,e.__k.forEach(function(P){P&&(P.__=e)}),_.__h.length&&l.push(_);break t}_.componentWillUpdate!=null&&_.componentWillUpdate(v,_.__s,w),_.componentDidUpdate!=null&&_.__h.push(function(){_.componentDidUpdate(c,a,u)})}_.context=w,_.props=v,_.state=_.__s,(p=s.__r)&&p(e),_.__d=!1,_.__v=e,_.__P=t,p=_.render(_.props,_.state,_.context),_.state=_.__s,_.getChildContext!=null&&(n=S(S({},n),_.getChildContext())),m||_.getSnapshotBeforeUpdate==null||(u=_.getSnapshotBeforeUpdate(c,a)),$=p!=null&&p.type===C&&p.key==null?p.props.children:p,nt(t,Array.isArray($)?$:[$],e,o,n,r,i,l,f,d),_.base=e.__e,e.__h=null,_.__h.length&&l.push(_),x&&(_.__E=_.__=null),_.__e=!1}else i==null&&e.__v===o.__v?(e.__k=o.__k,e.__e=o.__e):e.__e=Ut(o.__e,e,o,n,r,i,l,d);(p=s.diffed)&&p(e)}catch(P){e.__v=null,(d||i!=null)&&(e.__e=f,e.__h=!!d,i[i.indexOf(f)]=null),s.__e(P,e,o)}}function at(t,e){s.__c&&s.__c(e,t),t.some(function(o){try{t=o.__h,o.__h=[],t.some(function(n){n.call(o)})}catch(n){s.__e(n,o.__v)}})}function Ut(t,e,o,n,r,i,l,f){var d,p,_,m=o.props,c=e.props,a=e.type,u=0;if(a==="svg"&&(r=!0),i!=null){for(;u<i.length;u++)if((d=i[u])&&(d===t||(a?d.localName==a:d.nodeType==3))){t=d,i[u]=null;break}}if(t==null){if(a===null)return document.createTextNode(c);t=r?document.createElementNS("http://www.w3.org/2000/svg",a):document.createElement(a,c.is&&c),i=null,f=!1}if(a===null)m===c||f&&t.data===c||(t.data=c);else{if(i=i&&D.call(t.childNodes),p=(m=o.props||T).dangerouslySetInnerHTML,_=c.dangerouslySetInnerHTML,!f){if(i!=null)for(m={},u=0;u<t.attributes.length;u++)m[t.attributes[u].name]=t.attributes[u].value;(_||p)&&(_&&(p&&_.__html==p.__html||_.__html===t.innerHTML)||(t.innerHTML=_&&_.__html||""))}if(Rt(t,c,m,r,f),_)e.__k=[];else if(u=e.props.children,nt(t,Array.isArray(u)?u:[u],e,o,n,r&&a!=="foreignObject",i,l,i?i[0]:o.__k&&A(o,0),f),i!=null)for(u=i.length;u--;)i[u]!=null&&tt(i[u]);f||("value"in c&&(u=c.value)!==void 0&&(u!==t.value||a==="progress"&&!u)&&R(t,"value",u,m.value,!1),"checked"in c&&(u=c.checked)!==void 0&&u!==t.checked&&R(t,"checked",u,m.checked,!1))}return t}function ct(t,e,o){try{typeof t=="function"?t(e):t.current=e}catch(n){s.__e(n,o)}}function ft(t,e,o){var n,r;if(s.unmount&&s.unmount(t),(n=t.ref)&&(n.current&&n.current!==t.__e||ct(n,null,e)),(n=t.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(i){s.__e(i,e)}n.base=n.__P=null}if(n=t.__k)for(r=0;r<n.length;r++)n[r]&&ft(n[r],e,typeof t.type!="function");o||t.__e==null||tt(t.__e),t.__e=t.__d=void 0}function Lt(t,e,o){return this.constructor(t,o)}function pt(t,e,o){var n,r,i;s.__&&s.__(t,e),r=(n=typeof o=="function")?null:o&&o.__k||e.__k,i=[],I(e,t=(!n&&o||e).__k=h(C,null,[t]),r||T,T,e.ownerSVGElement!==void 0,!n&&o?[o]:r?null:e.firstChild?D.call(e.childNodes):null,i,!n&&o?o:r?r.__e:e.firstChild,n),at(i,t)}D=Q.slice,s={__e:function(t,e){for(var o,n,r;e=e.__;)if((o=e.__c)&&!o.__)try{if((n=o.constructor)&&n.getDerivedStateFromError!=null&&(o.setState(n.getDerivedStateFromError(t)),r=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(t),r=o.__d),r)return o.__E=o}catch(i){t=i}throw t}},J=0,k.prototype.setState=function(t,e){var o;o=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=S({},this.state),typeof t=="function"&&(t=t(S({},o),this.props)),t&&S(o,t),t!=null&&this.__v&&(e&&this.__h.push(e),ot(this))},k.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),ot(this))},k.prototype.render=C,E=[],K=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,M.__r=0;var O,g,dt,W=0,j=[],ut=s.__b,ht=s.__r,mt=s.diffed,vt=s.__c,bt=s.unmount;function gt(t,e){s.__h&&s.__h(g,t,W||e),W=0;var o=g.__H||(g.__H={__:[],__h:[]});return t>=o.__.length&&o.__.push({}),o.__[t]}function V(t){return W=1,Ft(yt,t)}function Ft(t,e,o){var n=gt(O++,2);return n.t=t,n.__c||(n.__=[o?o(e):yt(void 0,e),function(r){var i=n.t(n.__[0],r);n.__[0]!==i&&(n.__=[i,n.__[1]],n.__c.setState({}))}],n.__c=g),n.__}function It(t,e){var o=gt(O++,3);!s.__s&&Wt(o.__H,e)&&(o.__=t,o.__H=e,g.__H.__h.push(o))}function Ot(){j.forEach(function(t){if(t.__P)try{t.__H.__h.forEach(U),t.__H.__h.forEach(z),t.__H.__h=[]}catch(e){t.__H.__h=[],s.__e(e,t.__v)}}),j=[]}s.__b=function(t){g=null,ut&&ut(t)},s.__r=function(t){ht&&ht(t),O=0;var e=(g=t.__c).__H;e&&(e.__h.forEach(U),e.__h.forEach(z),e.__h=[])},s.diffed=function(t){mt&&mt(t);var e=t.__c;e&&e.__H&&e.__H.__h.length&&(j.push(e)!==1&&dt===s.requestAnimationFrame||((dt=s.requestAnimationFrame)||function(o){var n,r=function(){clearTimeout(i),wt&&cancelAnimationFrame(n),setTimeout(o)},i=setTimeout(r,100);wt&&(n=requestAnimationFrame(r))})(Ot)),g=void 0},s.__c=function(t,e){e.some(function(o){try{o.__h.forEach(U),o.__h=o.__h.filter(function(n){return!n.__||z(n)})}catch(n){e.some(function(r){r.__h&&(r.__h=[])}),e=[],s.__e(n,o.__v)}}),vt&&vt(t,e)},s.unmount=function(t){bt&&bt(t);var e=t.__c;if(e&&e.__H)try{e.__H.__.forEach(U)}catch(o){s.__e(o,e.__v)}};var wt=typeof requestAnimationFrame=="function";function U(t){var e=g;typeof t.__c=="function"&&t.__c(),g=e}function z(t){var e=g;t.__c=t.__(),g=e}function Wt(t,e){return!t||t.length!==e.length||e.some(function(o,n){return o!==t[n]})}function yt(t,e){return typeof e=="function"?e(t):e}function jt(t,e){for(var o in e)t[o]=e[o];return t}function kt(t,e){for(var o in t)if(o!=="__source"&&!(o in e))return!0;for(var n in e)if(n!=="__source"&&t[n]!==e[n])return!0;return!1}function B(t){this.props=t}(B.prototype=new k).isPureReactComponent=!0,B.prototype.shouldComponentUpdate=function(t,e){return kt(this.props,t)||kt(this.state,e)};var xt=s.__b;s.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),xt&&xt(t)};var Vt=s.__e;s.__e=function(t,e,o){if(t.then){for(var n,r=e;r=r.__;)if((n=r.__c)&&n.__c)return e.__e==null&&(e.__e=o.__e,e.__k=o.__k),n.__c(t,e)}Vt(t,e,o)};var St=s.unmount;function q(){this.__u=0,this.t=null,this.__b=null}function Ct(t){var e=t.__.__c;return e&&e.__e&&e.__e(t)}function L(){this.u=null,this.o=null}s.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&t.__h===!0&&(t.type=null),St&&St(t)},(q.prototype=new k).__c=function(t,e){var o=e.__c,n=this;n.t==null&&(n.t=[]),n.t.push(o);var r=Ct(n.__v),i=!1,l=function(){i||(i=!0,o.__R=null,r?r(f):f())};o.__R=l;var f=function(){if(!--n.__u){if(n.state.__e){var p=n.state.__e;n.__v.__k[0]=function m(c,a,u){return c&&(c.__v=null,c.__k=c.__k&&c.__k.map(function(x){return m(x,a,u)}),c.__c&&c.__c.__P===a&&(c.__e&&u.insertBefore(c.__e,c.__d),c.__c.__e=!0,c.__c.__P=u)),c}(p,p.__c.__P,p.__c.__O)}var _;for(n.setState({__e:n.__b=null});_=n.t.pop();)_.forceUpdate()}},d=e.__h===!0;n.__u++||d||n.setState({__e:n.__b=n.__v.__k[0]}),t.then(l,l)},q.prototype.componentWillUnmount=function(){this.t=[]},q.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var o=document.createElement("div"),n=this.__v.__k[0].__c;this.__v.__k[0]=function i(l,f,d){return l&&(l.__c&&l.__c.__H&&(l.__c.__H.__.forEach(function(p){typeof p.__c=="function"&&p.__c()}),l.__c.__H=null),(l=jt({},l)).__c!=null&&(l.__c.__P===d&&(l.__c.__P=f),l.__c=null),l.__k=l.__k&&l.__k.map(function(p){return i(p,f,d)})),l}(this.__b,o,n.__O=n.__P)}this.__b=null}var r=e.__e&&h(C,null,t.fallback);return r&&(r.__h=null),[h(C,null,e.__e?null:t.children),r]};var At=function(t,e,o){if(++o[1]===o[0]&&t.o.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.o.size))for(o=t.u;o;){for(;o.length>3;)o.pop()();if(o[1]<o[0])break;t.u=o=o[2]}};(L.prototype=new k).__e=function(t){var e=this,o=Ct(e.__v),n=e.o.get(t);return n[0]++,function(r){var i=function(){e.props.revealOrder?(n.push(r),At(e,t,n)):r()};o?o(i):i()}},L.prototype.render=function(t){this.u=null,this.o=new Map;var e=N(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var o=e.length;o--;)this.o.set(e[o],this.u=[1,0,this.u]);return t.children},L.prototype.componentDidUpdate=L.prototype.componentDidMount=function(){var t=this;this.o.forEach(function(e,o){At(t,o,e)})};var zt=typeof Symbol!="undefined"&&Symbol.for&&Symbol.for("react.element")||60103,Bt=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,qt=function(t){return(typeof Symbol!="undefined"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(t)};k.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(k.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var Et=s.event;function Gt(){}function Xt(){return this.cancelBubble}function Zt(){return this.defaultPrevented}s.event=function(t){return Et&&(t=Et(t)),t.persist=Gt,t.isPropagationStopped=Xt,t.isDefaultPrevented=Zt,t.nativeEvent=t};var $t={configurable:!0,get:function(){return this.class}},Pt=s.vnode;s.vnode=function(t){var e=t.type,o=t.props,n=o;if(typeof e=="string"){for(var r in n={},o){var i=o[r];r==="value"&&"defaultValue"in o&&i==null||(r==="defaultValue"&&"value"in o&&o.value==null?r="value":r==="download"&&i===!0?i="":/ondoubleclick/i.test(r)?r="ondblclick":/^onchange(textarea|input)/i.test(r+e)&&!qt(o.type)?r="oninput":/^on(Ani|Tra|Tou|BeforeInp)/.test(r)?r=r.toLowerCase():Bt.test(r)?r=r.replace(/[A-Z0-9]/,"-$&").toLowerCase():i===null&&(i=void 0),n[r]=i)}e=="select"&&n.multiple&&Array.isArray(n.value)&&(n.value=N(o.children).forEach(function(l){l.props.selected=n.value.indexOf(l.props.value)!=-1})),e=="select"&&n.defaultValue!=null&&(n.value=N(o.children).forEach(function(l){l.props.selected=n.multiple?n.defaultValue.indexOf(l.props.value)!=-1:n.defaultValue==l.props.value})),t.props=n}e&&o.class!=o.className&&($t.enumerable="className"in o,o.className!=null&&(n.class=o.className),Object.defineProperty(n,"className",$t)),t.$$typeof=zt,Pt&&Pt(t)};var Dt=s.__r;s.__r=function(t){Dt&&Dt(t)};class Jt extends k{constructor(e){super(e);this.raf=0,this.start=()=>{const{context:o,room:n}=this.props,{start:r,pause:i,total:l}=this.attributes.state,f=n.calibrationTimestamp;i?o.updateAttributes(["state"],{start:f-(i-r),pause:0,total:l}):o.updateAttributes(["state","pause"],f)},this.reset=()=>{const{context:o}=this.props;o.updateAttributes(["state"],{start:0,pause:0,total:0}),this.setState({isDone:!1})},this.init=o=>{const{context:n,room:r}=this.props;n.updateAttributes(["state"],{start:r.calibrationTimestamp,pause:0,total:o||0})},this.update=()=>{this.raf=requestAnimationFrame(this.update);const{context:o,room:n}=this.props;this.attributes=o.getAttributes();const{start:r,pause:i,total:l}=this.attributes.state,f=r===0,d=f||i!==0;let p=0;r&&(i?p=(i-r)/1e3|0:p=(n.calibrationTimestamp-r)/1e3|0),l&&(p>l&&(!i&&this.start(),this.setState({isDone:!0})),p=Math.max(l-p,0)),this.setState({isInit:f,stopped:d,seconds:p})},this.raf=requestAnimationFrame(this.update),this.attributes=e.context.getAttributes(),this.state={isInit:!0,isDone:!1,seconds:0,stopped:!0,start:this.start,reset:this.reset,init:this.init}}componentWillUnmount(){console.log("[Countdown]: unmount"),cancelAnimationFrame(this.raf)}render(){return h(Kt,Z({},this.state))}}class Kt extends B{constructor(e){super(e);this.correctValueFormat=o=>({left:Math.floor(o/10),right:o%10}),this.transformTime=()=>{if(this.props.isInit){const{total:f}=this.state;return{minutes_left:f[0],minutes_right:f[1],seconds_left:f[2],seconds_right:f[3]}}const o=this.props.seconds,n=Math.floor(o%(60*60)/60),r=Math.floor(o%60),i=this.correctValueFormat(n),l=this.correctValueFormat(r);return{minutes_left:i.left,minutes_right:i.right,seconds_left:l.left,seconds_right:l.right}},this.handleInit=()=>{const[o,n,r,i]=this.state.total;this.props.init((o*10+n)*60+(r*10+i))},this.handleReset=()=>{this.props.reset(),this.setState({total:[0,0,0,0]})},this.handleInc=o=>()=>{const n=this.state.total.map((r,i)=>i===o?(r+1)%10:r);o===2&&n[o]>5&&(n[o]=0),this.setState({total:n})},this.incMinutesLeft=this.handleInc(0),this.incMinutesRight=this.handleInc(1),this.incSecondsLeft=this.handleInc(2),this.incSecondsRight=this.handleInc(3),this.handleDec=o=>()=>{const n=this.state.total.map((r,i)=>i===o?(r+9)%10:r);o===2&&n[o]>5&&(n[o]=5),this.setState({total:n})},this.decMinutesLeft=this.handleDec(0),this.decMinutesRight=this.handleDec(1),this.decSecondsLeft=this.handleDec(2),this.decSecondsRight=this.handleDec(3),this.state={total:[0,0,0,0]}}render(){const{isInit:e,isDone:o,stopped:n,start:r}=this.props,{seconds_left:i,seconds_right:l,minutes_right:f,minutes_left:d}=this.transformTime(),p=o?"flipdown flipdown__theme-light":"flipdown flipdown__theme-dark";return h("div",{class:"flipdown-box"},!e&&h("div",{class:"flipdown-mask"},n?h("div",{class:"flipdown-mask-mid"},h("button",{onClick:this.handleReset,class:"flipdown-mask-btn"},"\u91CD\u7F6E"),!o&&h("button",{onClick:r,class:"flipdown-mask-btn"},"\u7EE7\u7EED")):h("div",{class:"flipdown-mask-mid"},h("button",{onClick:r,class:"flipdown-mask-btn"},"\u6682\u505C"))),h("div",{class:p},h("div",{class:"flipdown-mid-box"},h(F,{style:{marginRight:8},disabled:!e,time:d,onUp:this.incMinutesLeft,onDown:this.decMinutesLeft}),h(F,{time:f,disabled:!e,onUp:this.incMinutesRight,onDown:this.decMinutesRight})),h("div",{class:"flipdown-point-box"},h("div",{style:"margin-bottom: 12px"}),h("div",null)),h("div",{class:"flipdown-mid-box"},h(F,{style:{marginRight:8},disabled:!e,time:i,onUp:this.incSecondsLeft,onDown:this.decSecondsLeft}),h(F,{time:l,disabled:!e,onUp:this.incSecondsRight,onDown:this.decSecondsRight}))),e&&h("div",{class:"flipdown-buttons"},h("button",{onClick:this.handleInit,class:"flipdown-button"},"\u5F00\u59CB")))}}const F=({time:t,style:e,disabled:o,onUp:n,onDown:r})=>{const[i,l]=V("rotor-leaf"),[f,d]=V(0),[p,_]=V(0);return It(()=>{o||p?(_(1),l("rotor-leaf flipped"),setTimeout(()=>{l("rotor-leaf"),d(t)},500),!o&&_(0)):d(t)},[t,o]),h("div",{class:o?"flipdown-digit disabled":"flipdown-digit",style:e},h("div",{class:"flipdown-up",onClick:o?void 0:n}),h("div",{class:"rotor"},h("div",{class:i},h("figure",{class:"rotor-leaf-rear"},t),h("figure",{class:"rotor-leaf-front"},f)),h("div",{class:"rotor-top"},t),h("div",{class:"rotor-bottom"},f)),h("div",{class:"flipdown-down",onClick:o?void 0:r}))};var Yt=`.netless-app-flipdown-container{height:100%}.flipdown-box{height:100%;position:relative;display:flex;flex-flow:column nowrap;align-items:center;justify-content:center}.flipdown-mask{width:100%;height:100%;position:absolute;z-index:2;background-color:#0000004d;display:flex;justify-items:center;align-items:center;flex-direction:row;opacity:0}.flipdown-mask:hover{opacity:1}.flipdown-mask-btn{width:90px;height:28px;background-color:#3380ff;margin-left:auto;margin-right:auto;border:0;border-radius:4px;display:flex;align-items:center;justify-content:center;color:#fff;cursor:pointer}.flipdown-mask-mid{width:100%;height:100%;display:flex;align-items:center;justify-content:center}.flipdown-buttons{display:flex;flex-flow:column nowrap;gap:4px;padding-bottom:20px}.flipdown-button{width:180px;height:36px;border:0;background-color:#3380ff;margin-left:auto;margin-right:auto;border-radius:4px;display:flex;align-items:center;justify-content:center;color:#fff;cursor:pointer}.flipdown{display:flex;flex-direction:row;align-items:center;justify-content:center;transform-origin:center}.flipdown-digit{display:flex;flex-flow:column nowrap;align-items:center}.flipdown-digit.disabled .flipdown-up:before,.flipdown-digit.disabled .flipdown-down:after{border-top-color:#0000000d;border-bottom-color:#0000000d}.flipdown-up:before,.flipdown-down:after{content:"";display:inline-block;width:0;height:0;border-top:0;border-left:12px solid transparent;border-right:12px solid transparent;border-bottom:12px solid #151515;cursor:pointer}.flipdown-down:after{border-top:12px solid #151515;border-bottom:0}.flipdown-mid-box{display:flex;flex-direction:row;padding-top:20px;padding-bottom:8px}.flipdown-point-box{display:flex;flex-direction:column;justify-content:center;padding:20px 6px 8px}.flipdown-point-box div{width:8px;height:8px;background-color:#000;border-radius:50%}.flipdown.flipdown__theme-dark{font-family:sans-serif;font-weight:bold}.flipdown.flipdown__theme-dark .rotor,.flipdown.flipdown__theme-dark .rotor-top,.flipdown.flipdown__theme-dark .rotor-leaf-front{color:#fff;background-color:#151515}.flipdown.flipdown__theme-dark .rotor-bottom,.flipdown.flipdown__theme-dark .rotor-leaf-rear{color:#efefef;background-color:#202020}.flipdown.flipdown__theme-dark .rotor:after{border-top:solid 1px #151515}.flipdown.flipdown__theme-light{font-family:sans-serif;font-weight:bold}.flipdown.flipdown__theme-light .rotor,.flipdown.flipdown__theme-light .rotor-top,.flipdown.flipdown__theme-light .rotor-leaf-front{color:#222;background-color:#ddd}.flipdown.flipdown__theme-light .rotor-bottom,.flipdown.flipdown__theme-light .rotor-leaf-rear{color:#333;background-color:#eee}.flipdown.flipdown__theme-light .rotor:after{border-top:solid 1px #222222}.flipdown .rotor-group{position:relative}.flipdown .rotor{position:relative;width:36px;height:64px;border-radius:4px;font-size:48px;text-align:center;perspective:200px}.flipdown .rotor-top,.flipdown .rotor-bottom{overflow:hidden;position:absolute;width:36px;height:32px}.flipdown .rotor-leaf{z-index:1;position:absolute;width:36px;height:64px;transform-style:preserve-3d;transition:transform 0s}.flipdown .rotor-leaf.flipped{transform:rotateX(-180deg);transition:all .5s ease-in-out}.flipdown .rotor-leaf-front,.flipdown .rotor-leaf-rear{overflow:hidden;position:absolute;width:36px;height:32px;margin:0;transform:rotateX(0);backface-visibility:hidden;-webkit-backface-visibility:hidden}.flipdown .rotor-leaf-front{line-height:64px;border-radius:4px 4px 0 0}.flipdown .rotor-leaf-rear{line-height:0px;border-radius:0 0 4px 4px;transform:rotateX(-180deg)}.flipdown .rotor-top{line-height:64px;border-radius:4px 4px 0 0}.flipdown .rotor-bottom{bottom:0;line-height:0px;border-radius:0 0 4px 4px}.flipdown .rotor:after{content:"";z-index:2;position:absolute;bottom:0px;left:0px;width:36px;height:32px;border-radius:0 0 4px 4px}
`;const Qt=()=>null,te=208,ee=216,ne={kind:"Countdown",config:{minwidth:te,minheight:ee},setup(t){let e=t.getAttributes();if((e==null?void 0:e.state)||(t.setAttributes({state:{start:0,pause:0,total:0}}),e=t.getAttributes()),!e)throw new Error("[Countdown]: No attributes");const o=t.getRoom();if(!o)throw new Error("[Countdown]: No room");const n=t.getBox(),r=document.createElement("div");r.classList.add("netless-app-flipdown-container"),n.mountStyles(Yt),n.mountContent(r),pt(h(Jt,{context:t,room:o}),r),t.emitter.on("destroy",()=>{console.log("[Countdown]: destroy"),pt(h(Qt,null),r),r.remove()})}};export{ne as default};
