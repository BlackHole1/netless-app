import{S as s,i as e,s as t,e as r,t as a,m as o,b as n,c as l,F as p,d as u,g as i,G as d,o as c,h as b,D as w,l as m,u as g,H as f}from"./vendor.11e371e9.js";function y(s){let e,t,f,y,x,$,h,R,L,k,v,U,A;return{c(){e=r("div"),t=r("div"),f=r("span"),y=a(s[2]),x=o(),$=r("input"),h=o(),R=r("button"),R.textContent="GO",L=o(),k=r("iframe"),n(f,"class","netless-app-browser-status"),l(f,"loading","Loading"===s[2]),l(f,"ready","Ready"===s[2]),n($,"class","netless-app-browser-url"),n($,"autocomplete","off"),n($,"spellcheck","false"),n(R,"class","netless-app-browser-go"),n(t,"class","netless-app-browser-omnibox"),n(k,"title","Netless App Browser"),n(k,"class","netless-app-browser-content"),n(k,"frameborder","0"),p(k.src,v=s[0])||n(k,"src",v),n(e,"class","netless-app-browser"),n(e,"data-kind","browser")},m(r,a){u(r,e,a),i(e,t),i(t,f),i(f,y),i(t,x),i(t,$),d($,s[1]),i(t,h),i(t,R),i(e,L),i(e,k),U||(A=[c($,"input",s[5]),c(R,"click",s[4]),c(k,"load",s[3])],U=!0)},p(s,[e]){4&e&&b(y,s[2]),4&e&&l(f,"loading","Loading"===s[2]),4&e&&l(f,"ready","Ready"===s[2]),2&e&&$.value!==s[1]&&d($,s[1]),1&e&&!p(k.src,v=s[0])&&n(k,"src",v)},i:w,o:w,d(s){s&&m(e),U=!1,g(A)}}}function x(s,e,t){const r=f();let{url:a="about:blank"}=e,{dummyURL:o=a}=e,n="Ready";return s.$$set=s=>{"url"in s&&t(0,a=s.url),"dummyURL"in s&&t(1,o=s.dummyURL)},s.$$.update=()=>{1&s.$$.dirty&&r("update",a)},[a,o,n,function(){t(2,n="Ready")},function(){t(0,a=o),t(2,n="Loading")},function(){o=this.value,t(1,o)}]}class $ extends s{constructor(s){super(),e(this,s,x,y,t,{url:0,dummyURL:1})}}const h={kind:"Browser",setup(s){let e=s.getAttributes();if((null==e?void 0:e.url)||(s.setAttributes({url:"about:blank"}),e=s.getAttributes()),!e)throw new Error("[Browser]: Missing attributes");const t=s.getBox();t.mountStyles(".netless-app-browser{width:100%;height:100%;display:flex;flex-flow:column nowrap}.netless-app-browser-omnibox{padding:2px 4px;display:flex;align-items:center;gap:4px}.netless-app-browser-status{width:5em;font-size:x-small;text-align:center}.netless-app-browser-status.loading{color:gray}.netless-app-browser-status.ready{color:green}.netless-app-browser-url{flex-grow:1}.netless-app-browser-go{padding:1px 12px}.netless-app-browser-content{flex-grow:1}\n");const r=new $({target:t.$content,props:{url:e.url}});r.$on("update",(({detail:e})=>{s.updateAttributes(["url"],e)})),s.mobxUtils.autorun((()=>{r.$set({url:e.url,dummyURL:e.url})})),s.emitter.on("destroy",(()=>{console.log("[Browser]: destroy"),r.$destroy()}))}};export{h as default};
