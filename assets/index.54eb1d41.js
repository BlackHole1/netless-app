import{S as e,i as s,s as t,e as r,t as a,m as o,b as n,c as l,F as p,d as u,g as i,G as d,o as c,h as b,D as w,l as m,u as g,H as y}from"./vendor.11e371e9.js";function f(e){let s,t,y,f,x,$,h,R,k,L,v,U,A;return{c(){s=r("div"),t=r("div"),y=r("span"),f=a(e[2]),x=o(),$=r("input"),h=o(),R=r("button"),R.textContent="GO",k=o(),L=r("iframe"),n(y,"class","netless-app-browser-status"),l(y,"loading","Loading"===e[2]),l(y,"ready","Ready"===e[2]),n($,"class","netless-app-browser-url"),n($,"autocomplete","off"),n($,"spellcheck","false"),n(R,"class","netless-app-browser-go"),n(t,"class","netless-app-browser-omnibox"),n(L,"title","Netless App Browser"),n(L,"class","netless-app-browser-content"),n(L,"frameborder","0"),p(L.src,v=e[0])||n(L,"src",v),n(s,"class","netless-app-browser"),n(s,"data-kind","browser")},m(r,a){u(r,s,a),i(s,t),i(t,y),i(y,f),i(t,x),i(t,$),d($,e[1]),i(t,h),i(t,R),i(s,k),i(s,L),U||(A=[c($,"input",e[5]),c($,"keypress",e[6]),c(R,"click",e[4]),c(L,"load",e[3])],U=!0)},p(e,[s]){4&s&&b(f,e[2]),4&s&&l(y,"loading","Loading"===e[2]),4&s&&l(y,"ready","Ready"===e[2]),2&s&&$.value!==e[1]&&d($,e[1]),1&s&&!p(L.src,v=e[0])&&n(L,"src",v)},i:w,o:w,d(e){e&&m(s),U=!1,g(A)}}}function x(e,s,t){const r=y();let{url:a="about:blank"}=s,{dummyURL:o=a}=s,n="Ready";function l(){t(0,a=o),t(2,n="Loading")}return e.$$set=e=>{"url"in e&&t(0,a=e.url),"dummyURL"in e&&t(1,o=e.dummyURL)},e.$$.update=()=>{1&e.$$.dirty&&r("update",a)},[a,o,n,function(){t(2,n="Ready")},l,function(){o=this.value,t(1,o)},e=>"Enter"===e.key&&l()]}class $ extends e{constructor(e){super(),s(this,e,x,f,t,{url:0,dummyURL:1})}}const h={kind:"Browser",setup(e){let s=e.getAttributes();if((null==s?void 0:s.url)||(e.setAttributes({url:"about:blank"}),s=e.getAttributes()),!s)throw new Error("[Browser]: Missing attributes");const t=e.getBox();t.mountStyles(".netless-app-browser{width:100%;height:100%;display:flex;flex-flow:column nowrap}.netless-app-browser-omnibox{padding:2px 4px;display:flex;align-items:center;gap:4px}.netless-app-browser-status{width:5em;font-size:x-small;text-align:center}.netless-app-browser-status.loading{color:gray}.netless-app-browser-status.ready{color:green}.netless-app-browser-url{flex-grow:1}.netless-app-browser-go{padding:1px 12px}.netless-app-browser-content{flex-grow:1}\n");const r=new $({target:t.$content,props:{url:s.url}});r.$on("update",(({detail:s})=>{e.updateAttributes(["url"],s)})),e.mobxUtils.autorun((()=>{r.$set({url:s.url,dummyURL:s.url})})),e.emitter.on("destroy",(()=>{console.log("[Browser]: destroy"),r.$destroy()}))}};export{h as default};
