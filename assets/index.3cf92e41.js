import{S as B,i as U,s as A,e as m,t as E,m as h,b as l,c as g,F as R,d as S,g as p,G as L,o as y,h as q,D as v,l as x,u as C,H as D}from"./vendor.99b04728.js";function G(e){let s,t,r,o,d,a,c,f,w,n,u,_,k;return{c(){s=m("div"),t=m("div"),r=m("span"),o=E(e[2]),d=h(),a=m("input"),c=h(),f=m("button"),f.textContent="GO",w=h(),n=m("iframe"),l(r,"class","netless-app-browser-status"),g(r,"loading",e[2]==="Loading"),g(r,"ready",e[2]==="Ready"),l(a,"class","netless-app-browser-url"),l(a,"autocomplete","off"),l(a,"spellcheck","false"),l(f,"class","netless-app-browser-go"),l(t,"class","netless-app-browser-omnibox"),l(n,"title","Netless App Browser"),l(n,"class","netless-app-browser-content"),l(n,"frameborder","0"),R(n.src,u=e[0])||l(n,"src",u),l(s,"class","netless-app-browser"),l(s,"data-kind","browser")},m(i,b){S(i,s,b),p(s,t),p(t,r),p(r,o),p(t,d),p(t,a),L(a,e[1]),p(t,c),p(t,f),p(s,w),p(s,n),_||(k=[y(a,"input",e[5]),y(a,"keypress",e[6]),y(f,"click",e[4]),y(n,"load",e[3])],_=!0)},p(i,[b]){b&4&&q(o,i[2]),b&4&&g(r,"loading",i[2]==="Loading"),b&4&&g(r,"ready",i[2]==="Ready"),b&2&&a.value!==i[1]&&L(a,i[1]),b&1&&!R(n.src,u=i[0])&&l(n,"src",u)},i:v,o:v,d(i){i&&x(s),_=!1,C(k)}}}function j(e,s,t){const r=D();let{url:o="about:blank"}=s,{dummyURL:d=o}=s,a="Ready";function c(){t(2,a="Ready")}function f(){t(0,o=d),t(2,a="Loading")}function w(){d=this.value,t(1,d)}const n=u=>u.key==="Enter"&&f();return e.$$set=u=>{"url"in u&&t(0,o=u.url),"dummyURL"in u&&t(1,d=u.dummyURL)},e.$$.update=()=>{e.$$.dirty&1&&r("update",o)},[o,d,a,c,f,w,n]}class z extends B{constructor(s){super();U(this,s,j,G,A,{url:0,dummyURL:1})}}var F=`.netless-app-browser{width:100%;height:100%;display:flex;flex-flow:column nowrap}.netless-app-browser-omnibox{padding:2px 4px;display:flex;align-items:center;gap:4px}.netless-app-browser-status{width:5em;font-size:x-small;text-align:center}.netless-app-browser-status.loading{color:gray}.netless-app-browser-status.ready{color:green}.netless-app-browser-url{flex-grow:1}.netless-app-browser-go{padding:1px 12px}.netless-app-browser-content{display:block;flex-grow:1}
`;const M={kind:"Browser",setup(e){let s=e.getAttributes();if((s==null?void 0:s.url)||(e.setAttributes({url:"about:blank"}),s=e.getAttributes()),!s)throw new Error("[Browser]: Missing attributes");const t=e.getBox();t.mountStyles(F);const r=new z({target:t.$content,props:{url:s.url}});r.$on("update",({detail:o})=>{e.updateAttributes(["url"],o)}),e.mobxUtils.autorun(()=>{r.$set({url:s.url,dummyURL:s.url})}),e.emitter.on("destroy",()=>{console.log("[Browser]: destroy"),r.$destroy()})}};export{M as default};
